<html>
  <head>
    <title>StoryMap Embed Demo</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet">

    <style>
      /* Ensure the background is all white */
      body,
      html {
        margin: 0;
        padding: 0;
        font-family: "Avenir Next", "Helvetica Neue", Helvetica, Arial,
          sans-serif;
        /* background-color: white; */
        height: 100%;
        display: flex;
        flex-direction: column;
        
      }




      /* Styling for the nav bar */
      header {
        font-family: 'Poppins', sans-serif!important;
        width: 100%;
        background-color: white;
        border-bottom: 1px solid #e0e0e0;
        position: relative;
        z-index: 1000;
      }
      .header-container {
        padding: 30px;
        display: flex;
        justify-content: space-between;
      }

      #sticky-section {
        position: relative; /* Initially, it's below the header */
        background-color: white;
        transition: all 0.3s ease; /* Smooth transition when the section becomes sticky */
        padding: 30px; display: flex; justify-content: space-around;
      }

      .sticky {
        position: fixed !important;
        top: 0;
        left: 0;
        right: 0;
        z-index: 1000;
      }

      footer {
        background-color: #f8f8f8;
        font-size: 14px;
        position: relative;
        width: 100%;
        text-align: center;
      }
      .footer-container {
        padding: 30px;
        display: flex;
        justify-content: space-around;
      }
    </style>

    <script>

      window.addEventListener("scroll", function() {
        var headerHeight = document.getElementById("header").offsetHeight;
        var section = document.getElementById("sticky-section");
        if (window.scrollY > headerHeight) {
          section.classList.add("sticky");
        } else {
          section.classList.remove("sticky");
        }
      });

      const changeTitle = () => {
        const root = document.querySelector('.storymaps-root');
        const h1 = root.querySelector('.sc-title');
        h1.innerHTML = "Hahahahaha!";
      }

      const handleBGSelectChange = (event) => {
        const bgColor = event.target.value;
        const root = document.querySelector('.storymaps-root');
        root.querySelectorAll('p').forEach(child => {
          child.style.backgroundColor = bgColor;  // explicitly apply to all nested content
        });          
      }

      const handleLHSelectChange = (event) => {
        const lineHeight = event.target.value;
        const root = document.querySelector('.storymaps-root');
        root.querySelectorAll('p').forEach(child => {
          child.style.lineHeight = lineHeight;  // explicitly apply to all nested content
        });          
      }

    </script>
  </head>
  <body>
    <header id="header">
      <div class="header-container">
        <div>
          <h1>Lee's House of Stories</h1>
          <h2>A world of stories under one roof</h2>
        </div>
        <div style="display: flex;">
          <img src="./Lees_House_of_Stories_Logo_100x100.png"/>  
        </div>
      </div>
    </header>
    <section id="sticky-section">
      <div>
        <label for="lineHeight">Line spacing:</label>
        <select id="lineHeight" onchange="handleLHSelectChange(event)">
          <option value="1.65" selected>default</option>
          <option value="1.0">1.0</option>
          <option value="2.0">2.0</option>
          <option value="3.0">3.0</option>
        </select>    
      </div>
      <button onclick="changeTitle()" style="margin-right: 10px; align-self: center;">Change the title!</button>
      <div>
        <label for="bgColor">Background color:</label>
        <select id="bgColor" onchange="handleBGSelectChange(event)">
          <option value="">default</option>
          <option value="rgba(255,0,0,0.2)">red</option>
          <option value="rgba(0,255,0,0.2)">green</option>
          <option value="rgba(0,0,255,0.2)">blue</option>
        </select>
      </div>
    </section>
    <div class="storymaps-root"></div>
    <footer>
      <div class="footer-container">
        <div style="display: flex; flex-direction: column; align-items: start;">
        <h3>Thanks for stopping by!</h3>
        <h4>Stop by next week for another magical tale.</h4>
        <small>Lee's House of Stories is a wholly owned subsidiary of Citadel Global Technologies</small>
        </div>
        <img src="./lee.jpg"/>
      </div>
    </footer>
    <script
      id="embed-script"
      src="https://storymapsqa.arcgis.com/embed/view"
      data-story-id="749af21064e34f029bdd53946d9d941a"
      data-root-node=".storymaps-root"
    ></script>
  </body>
</html>
